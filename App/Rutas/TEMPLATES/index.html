{% extends "Master.html" %}

<!-- Para estilos exclusivamente para esta pagina -->
{% block stiles %}
<link rel="stylesheet" href="{{ url_for('static', filename='CSS/Booking.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='CSS/Booking_modals.css') }}">
<style>

</style>
{% endblock %}

{% block content %} 
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-image">
            <div class="hero-overlay">
                <h2 class="hero-title">BOLÍVAR</h2>
                <div class="booking-hero">
                <div class="booking-heading" style="text-align: start;">
                  <p class="booking-subtitle" >Selecciona tus fechas y encuentra la habitación perfecta para tu estadía en Hostal Bolívar.</p>
                </div>

                <form method="GET" action="{{ url_for('bookingroom.BookingRoom') }}" class="booking-card">
                  <div class="booking-field">
                    <label for="fechaEntrada">Fecha de entrada</label>
                    <input type="datetime-local" id="fechaEntrada" name="start" class="date_input">
                  </div>

                  <div class="booking-field">
                    <label for="fechaSalida">Fecha de salida</label>
                    <input type="datetime-local" id="fechaSalida" name="end" class="date_input">
                  </div>

                  <button type="submit" class="booking-submit">
                    <i class="fas fa-search"></i>
                    Buscar habitaciones
                  </button>
                </form>
              </div>

            </div>
        </div>
    </section>

    <!-- Welcome Section -->
    <section class="welcome">
        <div class="container">
            <div class="welcome-content">
                <h2>Bienvenido al Hostal Bolívar</h2>
                <p>Descubre el mejor espacio para tu relajación y comodidad</p>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section class="services">
        <div class="container">
            <h2 class="section-title">Nuestros servicios</h2>
            <!-- Primera sección: Imagen 70% - Texto 30% -->
            <div class="services-grid">
                <div class="service-item service-image-only">
                    <div class="service-image">
                        <img src="{{ url_for('static', filename='Img/fotohotel2.jpg') }}" alt="Habitación">
                        <div class="service-icon">
                            <i class="fas fa-bed"></i>
                        </div>
                    </div>
                </div>
                
                <div class="service-item service-text-only">
                    <div class="service-content">
                        <h3>Reserva de habitaciones</h3>
                        <p>Encuentra el espacio ideal para descansar, con todo el confort que mereces.</p>
                    </div>
                </div>
            </div>

            <!-- Segunda sección: Texto 70% - Imagen 30% -->
            <div class="services-grid">
                <div class="service-item service-text-only service-text-wide">
                    <div class="service-content">
                        <h3>Room Service</h3>
                        <p>Disfruta platos recién preparados sin salir de tu habitación, a cualquier hora del día.</p>
                    </div>
                </div>
                
                <div class="service-item service-image-only service-image-narrow">
                    <div class="service-image">
                        <img src="https://images.unsplash.com/photo-1551218808-94e220e084d2?w=400&h=300&fit=crop" alt="Room Service">
                        <div class="service-icon">
                            <i class="fas fa-bell"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tercera sección: Imagen 70% - Texto 30% -->
            <div class="services-grid">
                <div class="service-item service-image-only">
                    <div class="service-image">
                        <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&fit=crop" alt="Terraza">
                        <div class="service-icon">
                            <i class="fas fa-bullseye"></i>
                        </div>
                    </div>
                </div>
                
                <div class="service-item service-text-only">
                    <div class="service-content">
                        <h3>Reserva de eventos</h3>
                        <p>Celebra momentos únicos con una vista panorámica y un ambiente inolvidable.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Call to Action -->
    <section class="cta">
        <div class="container">
            <div class="cta-content">
                <div class="cta-text">
                    <h2>Ven con nosotros</h2>
                    <p>Es hora de probar con el mejor servicio</p>
                </div>
                <div class="cta-motto">
                    <h3>"Tu estancia, nuestra máxima prioridad"</h3>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="about">
        <div class="container">
            <div class="about-content">
                <div class="about-text">
                    <h2>Hostal Bolívar, la mejor opción</h2>
                    <div class="title-line"></div>
                    <p>En nuestro hostal encontrarás más que un lugar para dormir: descubrirás un espacio acogedor, con ambiente familiar y la calidez que solo se siente lejos de casa pero cerca de todo. Disfruta de habitaciones cómodas y un equipo dispuesto a ayudarte en cada paso de tu viaje.</p>
                </div>
                <div class="about-image">
                    <img src="{{ url_for('static', filename='Img/fotohotel3.jpg') }}" alt="Habitación del hostal">
                </div>
            </div>
        </div>
    </section>

    <section class="location-section">
        <div class="container">
            <h2 class="section-title">Nuestra ubicación</h2>
            <div class="map-wrapper">
                <iframe src="https://www.google.com/maps/embed?pb=!4v1762498101842!6m8!1m7!1st76RK0LqhRUVoECL04C09w!2m2!1d-6.758485861335314!2d-79.84205460787649!3f316.5984290718566!4f6.993007577798053!5f0.7820865974627469" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </div>
    </section>

    <script src="{{ url_for('static', filename='JS/main.js') }}"></script>
    <script src="{{ url_for('static', filename='JS/home.js') }}"></script>
    <script src="{{ url_for('static', filename='JS/Booking_modals.js') }}"></script>
    <script src="{{ url_for('static', filename='JS/date_input_lock.js') }}"></script>

<!-- <script>
document.querySelector(".booking-form").addEventListener("submit", function(event) {
  const entrada = document.getElementById("fechaEntrada").value.trim();
  const salida = document.getElementById("fechaSalida").value.trim();

  if (!entrada || !salida) {
    event.preventDefault(); // evita el envío del formulario
    alert("⚠️ Debes completar ambas fechas antes de buscar.");
  }
});
</script> -->

<script>
document.addEventListener("DOMContentLoaded", () => {
  const fechaEntrada = document.getElementById("fechaEntrada");
  const fechaSalida = document.getElementById("fechaSalida");
  const form = document.querySelector(".booking-card");
  if (!fechaEntrada || !fechaSalida || !form) return;

  const ONE_HOUR_MS = 60 * 60 * 1000;
  const pad = n => String(n).padStart(2, "0");
  const formatDateTimeLocal = date => `${date.getFullYear()}-${pad(date.getMonth() + 1)}-${pad(date.getDate())}T${pad(date.getHours())}:${pad(date.getMinutes())}`;
  const warn = message => showBookingAlert(message, "warning");

  const applyInitialConstraints = () => {
    const now = new Date();
    const localNow = formatDateTimeLocal(now);
    const initialSalida = formatDateTimeLocal(new Date(now.getTime() + ONE_HOUR_MS));
    fechaEntrada.min = localNow;
    fechaSalida.min = initialSalida;
    if (fechaEntrada.value && new Date(fechaEntrada.value) < new Date(localNow)) {
      fechaEntrada.value = localNow;
    }
    if (fechaSalida.value && new Date(fechaSalida.value) < new Date(initialSalida)) {
      fechaSalida.value = initialSalida;
    }
  };

  const syncExitWithEntry = () => {
    if (!fechaEntrada.value) return;
    const entradaDate = new Date(fechaEntrada.value);
    const minSalidaDate = new Date(entradaDate.getTime() + ONE_HOUR_MS);
    const minSalidaString = formatDateTimeLocal(minSalidaDate);
    fechaSalida.min = minSalidaString;
    if (!fechaSalida.value || new Date(fechaSalida.value) < minSalidaDate) {
      fechaSalida.value = minSalidaString;
    }
  };

  fechaEntrada.addEventListener("change", syncExitWithEntry);
  fechaSalida.addEventListener("change", () => {
    if (!fechaEntrada.value || !fechaSalida.value) return;
    const entradaDate = new Date(fechaEntrada.value);
    const minSalidaDate = new Date(entradaDate.getTime() + ONE_HOUR_MS);
    if (new Date(fechaSalida.value) < minSalidaDate) {
      const minSalidaString = formatDateTimeLocal(minSalidaDate);
      fechaSalida.value = minSalidaString;
      fechaSalida.min = minSalidaString;
    }
  });

  form.addEventListener("submit", event => {
    const now = new Date();
    if (!fechaEntrada.value || !fechaSalida.value) {
      warn("⚠️ Debes seleccionar ambas fechas.");
      event.preventDefault();
      return;
    }
    const entrada = new Date(fechaEntrada.value);
    const salida = new Date(fechaSalida.value);

    if (entrada < now) {
      warn("⚠️ La fecha de entrada debe ser posterior a la fecha y hora actuales.");
      event.preventDefault();
      return;
    }
    if (entrada >= salida) {
      warn("⚠️ La fecha de salida debe ser posterior a la fecha de entrada.");
      event.preventDefault();
      return;
    }
    if ((salida.getTime() - entrada.getTime()) < ONE_HOUR_MS) {
      warn("⚠️ La fecha de salida debe ser al menos una hora después de la fecha de entrada.");
      event.preventDefault();
    }
  });

  applyInitialConstraints();
});
</script>

{% endblock %}rgba(255, 255, 255, 0.504)