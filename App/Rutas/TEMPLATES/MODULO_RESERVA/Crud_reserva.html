{% extends "Master.html" %}

{% block stiles %}
<link rel="stylesheet" href="{{ url_for('static', filename='CSS/CRUDS.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='CSS/Crud_Empleados.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='CSS/Crud_reserva.css') }}">
{% endblock %}

{% block content %}
<div class="main-wrapper">
  <div class="main-container">
    <!-- ===== SIDEBAR IZQUIERDA ===== -->
    <nav class="sidebar" id="nav-principal">
      <h2>MÃ³dulo Reserva</h2>
      <a href="{{ url_for('modulos.reserva_dashboard') }}" id="nav-dashboard">ğŸ‘¤ Gestionar</a>
      <a href="{{ url_for('modulos.categorias') }}" id="nav-categorias">ğŸ‘¤ Gestionar CategorÃ­as</a>
      <a href="{{ url_for('modulos.habitaciones') }}" id="nav-habitaciones">ğŸ‘¤ Gestionar Habitaciones</a>
      <a href="{{ url_for('modulos.reserva') }}" id="nav-reservas">ğŸ‘¤ Gestionar Reservas</a>
      <a href="{{ url_for('modulos.promociones') }}" id="nav-promociones">ğŸ‘¤ Gestionar Promociones</a>
      <a href="{{ url_for('modulos.pisos') }}" id="nav-pisos">ğŸ‘¤ Gestionar Pisos</a>
    </nav>
<main class="content-crud-reserva" id="main-reserva">
    <!-- ===== CONTENIDO RESERVA ===== -->
    {% block dashboard_content %}

    {% endblock %}
    {% block categories_content %}

    {% endblock %}
    {% block rooms_content %}

    {% endblock %}
    {% block booking_content %}

    {% endblock %}
    <!-- ===== CONTENIDO PROMOCIONES ===== -->
    {% block promociones_content %}

    {% endblock %}
    <!-- ===== CONTENIDO PISO ===== -->
     {% block floors_content %}

    {% endblock %}
</main>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
    // Obtiene el div dentro del main
    const main = document.querySelector(".content-crud-reserva");
    if (!main) return;

    const innerDiv = main.querySelector("div[id]");
    if (!innerDiv) return;

    const divId = innerDiv.id; // Ejemplo: "content-crud-reserva"
    console.log("Div detectado:", divId);

    // Determina quÃ© enlace activar segÃºn el div dentro del main
    let activeId = null;

    switch (divId) {
        case "pisos":
            activeId = "nav-pisos";
            break;
        case "reservas":
            activeId = "nav-reservas";
            break;
        case "categorias":
            activeId = "nav-categorias";
            break;
        case "habitaciones":
            activeId = "nav-habitaciones";
            break;
        case "resumen":
            activeId = "nav-dashboard";
            break;
        case "promociones":
            activeId = "nav-promociones";
            break;
        default:
            console.warn("No se encontrÃ³ coincidencia para el div:", divId);
            break;
    }

    // Activa el enlace correspondiente
    if (activeId) {
        const nav = document.getElementById("nav-principal");
        if (!nav) return;

        nav.querySelectorAll("a").forEach(link => {
            if (link.id === activeId) {
                link.classList.add("active");
            } else {
                link.classList.remove("active");
            }
        });
    }
});
</script>

{% endblock %}
