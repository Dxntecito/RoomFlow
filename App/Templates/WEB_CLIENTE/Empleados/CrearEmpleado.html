{% extends "Master.html" %}

{% block stiles %}
<link rel="stylesheet" href="../../Static/CSS/Empleados.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Arimo:ital,wght@0,400..700;1,400..700&display=swap"
    rel="stylesheet">
{% endblock %}

{% block content %}
<div class="empleados-container">
    <div class="form-header">
        <h1 class="form-title">Crear Nuevo Empleado</h1>
        <a href="{{ url_for('empleados.Empleados') }}" class="back-button">
            <i class="fas fa-arrow-left"></i>
            Volver a Empleados
        </a>
    </div>

    <div class="form-container">
        <form method="POST" class="empleado-form">
            <div class="form-row">
                <div class="form-group">
                    <label for="cod_empleado" class="form-label">Código de Empleado *</label>
                    <input type="text" id="cod_empleado" name="cod_empleado" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="dni" class="form-label">DNI *</label>
                    <input type="text" id="dni" name="dni" class="form-input" maxlength="8" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="nombres" class="form-label">Nombres *</label>
                    <input type="text" id="nombres" name="nombres" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="ape_paterno" class="form-label">Apellido Paterno *</label>
                    <input type="text" id="ape_paterno" name="ape_paterno" class="form-input" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="ape_materno" class="form-label">Apellido Materno *</label>
                    <input type="text" id="ape_materno" name="ape_materno" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="sexo" class="form-label">Sexo *</label>
                    <select id="sexo" name="sexo" class="form-select" required>
                        <option value="">Seleccione sexo</option>
                        <option value="M">Masculino</option>
                        <option value="F">Femenino</option>
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="movil" class="form-label">Teléfono Móvil *</label>
                    <input type="text" id="movil" name="movil" class="form-input" maxlength="9" required>
                </div>
                <div class="form-group">
                    <label for="tipo_empleado_id" class="form-label">Tipo de Empleado *</label>
                    <select id="tipo_empleado_id" name="tipo_empleado_id" class="form-select" required>
                        <option value="">Seleccione tipo</option>
                        {% for tipo in tipos_empleado %}
                        <option value="{{ tipo[0] }}">{{ tipo[1] }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="submit-button">
                    <i class="fas fa-save"></i>
                    Crear Empleado
                </button>
                <a href="{{ url_for('empleados.Empleados') }}" class="cancel-button">
                    <i class="fas fa-times"></i>
                    Cancelar
                </a>
            </div>
        </form>
    </div>
</div>

<!-- Mensajes flash -->
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<div class="flash-messages">
    {% for category, message in messages %}
    <div class="flash-message flash-{{ category }}">
        <i
            class="fas fa-{% if category == 'success' %}check-circle{% elif category == 'error' %}exclamation-circle{% else %}info-circle{% endif %}"></i>
        {{ message }}
    </div>
    {% endfor %}
</div>
{% endif %}
{% endwith %}

<script>
    // Auto-hide flash messages
    document.addEventListener('DOMContentLoaded', function () {
        const flashMessages = document.querySelectorAll('.flash-message');
        flashMessages.forEach(function (message) {
            setTimeout(function () {
                message.style.opacity = '0';
                setTimeout(function () {
                    message.remove();
                }, 300);
            }, 5000);
        });
    });

    // Validación de DNI (solo números)
    document.getElementById('dni').addEventListener('input', function (e) {
        this.value = this.value.replace(/[^0-9]/g, '');
    });

    // Validación de teléfono (solo números)
    document.getElementById('movil').addEventListener('input', function (e) {
        this.value = this.value.replace(/[^0-9]/g, '');
    });
</script>
{% endblock content %}